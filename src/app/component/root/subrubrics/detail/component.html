<div class="input-multi-lang">
  <label class="input-label">{{ "NAME" | translate }}</label>
  <div>
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon">DE</span>
      <input pInputText type="text"
        [(ngModel)]="subrubric.name.de"
        [placeholder]="subrubric.name.deSubstitute"
        (ngModelChange)="configService.delaySave()"
      />
    </div>
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon">FR</span>
      <input pInputText type="text"
        [(ngModel)]="subrubric.name.fr"
        [placeholder]="subrubric.name.frSubstitute"
        (ngModelChange)="configService.delaySave()"
      />
    </div>
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon">IT</span>
      <input pInputText type="text"
        [(ngModel)]="subrubric.name.it"
        [placeholder]="subrubric.name.itSubstitute"
        (ngModelChange)="configService.delaySave()"
      />
    </div>
    <div class="p-inputgroup">
      <span class="p-inputgroup-addon">EN</span>
      <input pInputText type="text"
        [(ngModel)]="subrubric.name.en"
        [placeholder]="subrubric.name.enSubstitute"
        (ngModelChange)="configService.delaySave()"
      />
    </div>
  </div>
</div>

<div class="inputrow">
  <label for="code" class="input-label"><b>{{ "CODE" | translate }}</b></label>
  <input pInputText type="text" id="code"
    [(ngModel)]="subrubric.code"
    (ngModelChange)="configService.delaySave()"
    class="input-medium-width"
  />
</div>

<div class="inputrow">
  <label for="exampleUrl" class="input-label">{{ "EXAMPLE_URL" | translate }}</label>
  <input pInputText type="text" id="exampleUrl"
    [(ngModel)]="subrubric.exampleUrl"
    (ngModelChange)="configService.delaySave()"
    class="input-max-width"
  />
</div>

<ng-template #publicationInfo>
  <tr class="tablefooter">
    <td colspan="7">
      <div class="form-row">
        <label class="block">{{ "PUBLIC_DURATION" | translate }} (1-99)</label>
        <div class="right">
          <div class="inputgroup">
            <label for="defaultDuration" class="block">{{ "DEFAULT" | translate }}</label>
            <p-inputNumber id="defaultDuration"
              [(ngModel)]="subrubric.info.publicDuration.default"
              mode="decimal" [min]="1" [max]="99" [maxlength]="2"
              [showButtons]="true"
              (ngModelChange)="configService.delaySave()"
            />
          </div>
          <div class="inputgroup">
            <label for="minDuration" class="block">{{ "MIN" | translate }}</label>
            <p-inputNumber id="minDuration"
              [(ngModel)]="subrubric.info.publicDuration.min"
              mode="decimal" [min]="1" [max]="99" [maxlength]="2"
              [showButtons]="true"
              (ngModelChange)="configService.delaySave()"
            />
          </div>
          <div class="inputgroup">
            <label for="maxDuration" class="block">{{ "MAX" | translate }}</label>
            <p-inputNumber id="maxDuration"
              [(ngModel)]="subrubric.info.publicDuration.max"
              mode="decimal" [min]="1" [max]="99" [maxlength]="2"
              [showButtons]="true"
              (ngModelChange)="configService.delaySave()"
            />
          </div>
        </div>
     </div>
      <div class="form-row">
        <label class="block">{{ "AUTHORIZATION" | translate }}</label>
        <p-selectButton *ngIf="translateService.currentLang === 'de'"
          [(ngModel)]="subrubric.info.authorization"
          [options]="configService.config.authorizationRegistrationOfficeTypes" optionLabel="name.de" optionValue="code"
          [multiple]="true"
          (ngModelChange)="configService.delaySave()"
        />
        <p-selectButton *ngIf="translateService.currentLang === 'fr'"
          [(ngModel)]="subrubric.info.authorization"
          [options]="configService.config.authorizationRegistrationOfficeTypes" optionLabel="name.fr" optionValue="code"
          [multiple]="true"
          (ngModelChange)="configService.delaySave()"
        />
        <p-selectButton *ngIf="translateService.currentLang === 'it'"
          [(ngModel)]="subrubric.info.authorization"
          [options]="configService.config.authorizationRegistrationOfficeTypes" optionLabel="name.it" optionValue="code"
          [multiple]="true"
          (ngModelChange)="configService.delaySave()"
        />
        <p-selectButton *ngIf="translateService.currentLang === 'en'"
          [(ngModel)]="subrubric.info.authorization"
          [options]="configService.config.authorizationRegistrationOfficeTypes" optionLabel="name.en" optionValue="code"
          [multiple]="true"
          (ngModelChange)="configService.delaySave()"
        />
      </div>
      <div class="form-row-textarea multilang">
        <label class="block">{{ "LEGAL_NOTICE" | translate }}</label>
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon">DE</span>
          <textarea pInputTextarea id="legal-de"
            [(ngModel)]="subrubric.info.legalNotice.de"
            [placeholder]="subrubric.info.legalNotice.deSubstitute"
            (change)="configService.delaySave()"
          ></textarea>
        </div>
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon">FR</span>
          <textarea pInputTextarea id="legal-fr"
            [(ngModel)]="subrubric.info.legalNotice.fr"
            [placeholder]="subrubric.info.legalNotice.frSubstitute"
            (change)="configService.delaySave()"
          ></textarea>
        </div>
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon">IT</span>
          <textarea pInputTextarea id="legal-it"
            [(ngModel)]="subrubric.info.legalNotice.it"
            [placeholder]="subrubric.info.legalNotice.itSubstitute"
            (change)="configService.delaySave()"
          ></textarea>
        </div>
        <div class="p-inputgroup">
          <span class="p-inputgroup-addon">EN</span>
          <textarea pInputTextarea id="legal-en"
            [(ngModel)]="subrubric.info.legalNotice.en"
            [placeholder]="subrubric.info.legalNotice.enSubstitute"
            (change)="configService.delaySave()"
          ></textarea>
        </div>
      </div>
    </td>
  </tr>
</ng-template>

<p-table
  [value]="terms"
  [scrollable]="true" scrollHeight="flex"
  styleClass="p-datatable-sm"
>

  <ng-template pTemplate="header">
    <tr>
      <th style="padding-left: 1rem">{{ "TERM" | translate }}</th>
      <th>{{ "TYPE" | translate }}</th>
      <th>{{ "VALUE_TYPE" | translate }}</th>
      <th style="text-align: center">{{ "PRIMARY" | translate }}</th>
      <th style="text-align: center">{{ "REQUIRED" | translate }}</th>
      <th style="text-align: center">{{ "EDITABLE" | translate }}</th>
      <th style="text-align: right; padding: 0; padding-right: 1rem">
        <p-button icon="pi pi-list"
          pTooltip="{{ 'ADD_REMOVE' | translate }}" tooltipPosition="left" [positionTop]="-6" [positionLeft]="5"
          (click)="pickTerms()"
          styleClass="p-button-success minibutton"
        />
      </th>
    </tr>
    <tr *ngIf="this.terms.length < 1" style="background: #fff">
      <td colspan="7" style="height: 2rem"></td>
    </tr>
    <ng-container *ngIf="this.terms.length < 1" [ngTemplateOutlet]="publicationInfo"/>
  </ng-template>

  <ng-template pTemplate="body" let-term let-rowIndex="rowIndex">
    <tr [ngClass]="{ highlight: term.term.type === 'businessCase' || term.primary, primary: term.primary }">
      <td class="name" style="padding-left: 1rem; padding-top: 0.4375rem">
        {{ term.term.term | multilang }}
      </td>
      <td style="padding-top: 0.4375rem">{{term.term.type}}</td>
      <td style="padding-top: 0.4375rem">{{term.term.valueType}}</td>
      <td style="padding-top: 0.3125rem; text-align: center">
        <p-checkbox
          [(ngModel)]="term.primary" [binary]="true"
          (ngModelChange)="setUniquePrimary( term ); configService.delaySave()"
        />
      </td>
      <td style="padding-top: 0.3125rem; text-align: center">
        <p-checkbox
          [(ngModel)]="term.required" [binary]="true"
          (ngModelChange)="configService.delaySave()"
        />
      </td>
      <td style="padding-top: 0.3125rem; text-align: center">
        <p-checkbox
          [(ngModel)]="term.editable" [binary]="true"
          (ngModelChange)="configService.delaySave()"
        />
      </td>
      <td style="padding-top: 0.125rem; padding-right: 1rem; width: 5.5rem; min-width: 5.5rem; text-align: right">
        <p-button icon="pi pi-file-edit"
          pTooltip="{{ 'EDIT' | translate }}" tooltipPosition="left" [positionTop]="-5" [positionLeft]="5"
          (click)="editTerm( term.term )"
          styleClass="minibutton"
        />
        <p-button icon="pi pi-trash"
          pTooltip="{{ 'DELETE' | translate }}" tooltipPosition="left" [positionTop]="-5" [positionLeft]="5"
          (click)="removeTerm( term )"
          styleClass="p-button-danger minibutton"
        />
      </td>
    </tr>
    <ng-container *ngIf="rowIndex === this.terms.length - 1" [ngTemplateOutlet]="publicationInfo"/>
  </ng-template>

  <ng-template pTemplate="summary"/>

</p-table>
